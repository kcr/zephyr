/**/#	Copyright 1988, 1993 Massachusetts Institute of Technology.
/**/#
/**/#	For copying and distribution information, see the file
/**/#	"mit-copyright.h". 
/**/#
/**/#	$Id: Imakefile,v 1.6 1993-11-19 15:48:24 probe Exp $

OBJS = string_dictionary_aux.o int_dictionary.o string_dictionary.o
SRCS = string_dictionary_aux.c int_dictionary.c string_dictionary.c

XDEFS = -I../String -I../Memory

GENERATORS= generate_dictionary_instance

all:: string_dictionary.h dictionary_spec $(OBJS)
depend:: $(GENERATORS) $(SRCS)

/**/# Automatically generate a spec file from the template include file:
dictionary_spec: dictionary.h
	cat dictionary.h | grep "^.\*" | grep -v "^ \*/" | sed 's/.\*//' > dictionary_spec

/**/# Generate a int dictionary instance:
int_dictionary.c int_dictionary.h: dictionary.c dictionary.h
	./generate_dictionary_instance . int

/**/# Generate a string dictionary instance:
string_dictionary.c string_dictionary.h: dictionary.c dictionary.h
	./generate_dictionary_instance . string new_string.h

clean::
	$(RM) $(OBJS) dictionary_spec int_dictionary.c string_dictionary.c \
		int_dictionary.h string_dictionary.h

string_dictionary_aux.o: string_dictionary.h
