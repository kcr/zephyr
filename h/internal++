// -*- C++ -*-

#ifndef __INTERNALPLUSLUS__
#define __INERNALPLUSPLUS__

extern "C" {
#include <internal.h>
}

#include <exception>

class com_except : public std::exception {
public:
    long code;
    com_except(long error_code) : exception() {
	code = error_code;
    }
    virtual const char* what() const throw() {
	return error_message(code);
    }
};

template<typename T> class Zcleaner {
public:
    T contents;
    inline operator T() {
	return contents;
    }
    inline T *operator &() {
	return &contents;
    }
};

template<typename T>class Zpcleaner {
public:
    T *pointer;
    inline operator T *() {
	return pointer;
    }
    inline T *operator ->() {
	return pointer;
    }
};

#endif
