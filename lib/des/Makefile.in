SHELL = /bin/sh

prefix=@prefix@
exec_prefix=@exec_prefix@
datadir=@datadir@
confdir=@confdir@
sbindir=@sbindir@

includedir=$(prefix)/include
mandir=$(prefix)/man
libdir=$(exec_prefix)/lib

srcdir=@srcdir@
top_srcdir=@top_srcdir@
BUILDTOP=../..
VPATH=@srcdir@
CC=@CC@
RANLIB=@RANLIB@

DEBUG=-O
CFLAGS=$(DEBUG) -I$(top_srcdir)/h -I$(BUILDTOP)/h @CPPFLAGS@

OBJS =	f_cbc.o f_cksum.o f_pcbc.o f_sched.o f_ecb.o f_parity.o f_tables.o \
	key_sched.o debug_decl.o quad_cksum.o random_key.o string_to_key.o \
	weak_key.o new_rnd_key.o util.o desglue.o

all: libdes.a destest

libdes.a: $(OBJS)
	$(AR) cru $@ $(OBJS)
	$(RANLIB) $@

destest: libdes.a destest.o
	$(CC) $(LDFLAGS) -o $@ destest.o libdes.a

check:

install:

clean:
	rm -f $(OBJS) libdes.a enc.o enc destest.o destest verify.o verify

${OBJS} enc.o destest.o verify.o: des.h $(top_srcdir)/h/sysdep.h
${OBJS} enc.o destest.o verify.o: $(BUILDTOP)/h/config.h

.PHONY: all check install clean

