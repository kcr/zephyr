# This file is part of libdyn.a, the C Dynamic Object library.  It
# contains the Makefile.
#
# There are no restrictions on this code; however, if you make any
# changes, I request that you document them so that I do not get
# credit or blame for your modifications.
#
# Written by Barr3y Jaspan, Student Information Processing Board (SIPB)
# and MIT-Project Athena, 1989.

SRCS	= dyn_create.c dyn_put.c dyn_debug.c dyn_delete.c dyn_size.c \
	dyn_append.c dyn_realloc.c dyn_paranoid.c dyn_insert.c
OBJS	= dyn_create.o dyn_put.o dyn_debug.o dyn_delete.o dyn_size.o \
	dyn_append.o dyn_realloc.o dyn_paranoid.o dyn_insert.o
HDRS	= dyn.h dynP.h dyntest.c

SRCDIR	= ${SRCTOP}/libdyn
CODE	= ${SRCS} ${HDRS} Imakefile dyn.3

all:: libdyn.a

llib-ldyn.ln:: ${HDRS}

depend:: dyn.h dyntest.c
	$(RM) ../include/dyn.h
	$(CP) dyn.h ../include/dyn.h

library_obj_rule()

install_library_target(dyn,${OBJS},${SRCS},)

all::
	$(RM) ../libs/libdyn.a ../libs/libdyn_p.a
	$(CP) libdyn.a ../libs/libdyn.a
	$(RANLIB) ../libs/libdyn.a
#ifdef PROFILED_LIBS
	$(CP) libdyn_p.a ../libs/libdyn_p.a
	$(RANLIB) ../libs/libdyn_p.a
#endif

dyntest: libdyn.a dyntest.o
	$(CC) -o dyntest dyntest.o libdyn.a

manpage(3,dyn.3)

#define last_licks()							@@\
llib-ldyn.ln::								@@\
	$(CP) llib-ldyn.ln ../libs/llib-ldyn.ln
