/**/#	Copyright 1988,1993 Massachusetts Institute of Technology
/**/#	For copying and distribution information, see the file
/**/#	"mit-copyright.h"
/**/#
/**/#	$Id: zephyr.rules,v 1.1 1993-11-21 00:18:11 probe Exp $

#define HAVE_IMAKE
#define HAVE_MKDEP
#define HAVE_LIBS

#define KERBEROS
#define HESIOD

#ifndef UseSharedLibs
#define UseSharedLibs
#endif

ZLIBDIR = $(ATHLIBDIR)/zephyr
ZINCDIR = $(ATHINCDIR)/zephyr
ZACLDIR = $(ZLIBDIR)/acl

BINC = $(PTOP)/include

ZLIBS = $(PTOP)/lib/libzephyr.a $(LIB_KRB) $(LIB_ET)
DYN_LIB = $(PTOP)/libdyn/libdyn.a

#ifdef KERBEROS
CDEFS_KRB = -DKERBEROS
#endif
#ifdef HESIOD
CDEFS_HES = -DHESIOD
#endif

DEFINES = $(CDEFS_KRB) $(CDEFS_HES) $(XDEFS) -I$(BINC) $(MACHDEFS)

#define make_err(name) \
error_table(name)							@@\
all:: concat3($(BINC)/zephyr/,name,.h)					@@\
$(OBJS): concat3($(BINC)/zephyr/,name,.h)				@@\
concat3($(BINC)/zephyr/,name,.h): concat2(name,.h)			@@\
	$(RM) $@; $(CP) concat2(name,.h) $@				@@\
clean::									@@\
	$(RM) concat3($(BINC)/zephyr/,name,.h)

#define zprogram(name,libs) \
SimpleProgram(name,$(OBJS),libs $(ZLIBS),$(ATHBINDIR))			@@\
create_depend($(SRCS))

AnsiCC()
